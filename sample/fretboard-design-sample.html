<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ギターフレットボード デザインサンプル</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apple風カスタムスタイル */
        .card {
            @apply bg-white border border-gray-300 rounded-2xl shadow-sm p-6;
        }
        
        .card:hover {
            @apply shadow-md border-gray-400;
        }
        
        .chord-dot {
            transition: all 0.15s ease-in-out;
            stroke-width: 3px;
            filter: drop-shadow(0 0 0 rgba(59, 130, 246, 0));
        }
        
        .chord-dot:hover {
            stroke-width: 4px;
            filter: drop-shadow(0 0 3px rgba(59, 130, 246, 0.5));
            fill: #1E40AF;
        }
        
        .chord-dot:focus {
            stroke-width: 4px;
            filter: drop-shadow(0 0 3px rgba(59, 130, 246, 0.5));
            outline: 2px solid #1D4ED8;
            outline-offset: 2px;
            fill: #1D4ED8 !important;
        }
        
        /* ハイコントラストモードでのフォーカス強化 */
        @media (prefers-contrast: high) {
            .chord-dot:focus {
                outline-width: 3px;
                outline-offset: 3px;
            }
        }
        
        .string-line {
            transition: stroke 0.15s ease-in-out;
        }
        
        .fret-line {
            transition: stroke 0.15s ease-in-out;
        }
        
        /* アクセシビリティ用スクリーンリーダー専用要素 */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* 高コントラストモード対応 */
        @media (prefers-contrast: high) {
            .chord-dot {
                stroke-width: 5px;
            }
            
            .chord-dot:hover,
            .chord-dot:focus {
                stroke-width: 6px;
            }
            
            .string-line, .fret-line {
                stroke-width: 3px;
            }
        }
        
        /* アニメーション無効化対応 */
        @media (prefers-reduced-motion: reduce) {
            .chord-dot, .string-line, .fret-line {
                transition: none;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        <!-- ヘッダー -->
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">ギターフレットボード デザインサンプル</h1>
            <p class="text-lg text-gray-600">Apple風デザインシステム + WCAG 2.1 AAA準拠</p>
        </header>

        <!-- 横向きフレットボード（デスクトップ表示） -->
        <section class="mb-12">
            <div class="card">
                <div class="mb-6">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">横向きフレットボード - Cメジャーコード</h2>
                    <p class="text-sm text-gray-600">難易度: 初級 | 矢印キーで移動、Enter/Spaceで再生</p>
                </div>
                
                <div class="mb-6">
                    <svg viewBox="0 0 800 300" class="w-full h-auto border border-gray-200 rounded-lg bg-white" role="img" aria-label="Cメジャーコードのフレットボード図">
                        <!-- 背景 -->
                        <rect x="0" y="0" width="800" height="300" fill="#FEFEFE"/>
                        
                        <!-- フレット線 -->
                        <line x1="80" y1="40" x2="80" y2="260" stroke="#111827" stroke-width="4" class="fret-line"/>
                        <line x1="200" y1="40" x2="200" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="320" y1="40" x2="320" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="440" y1="40" x2="440" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="560" y1="40" x2="560" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="680" y1="40" x2="680" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        
                        <!-- 弦（上から1弦、下が6弦） -->
                        <line x1="80" y1="60" x2="720" y2="60" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 1弦（高音E） -->
                        <line x1="80" y1="100" x2="720" y2="100" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 2弦（B） -->
                        <line x1="80" y1="140" x2="720" y2="140" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 3弦（G） -->
                        <line x1="80" y1="180" x2="720" y2="180" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 4弦（D） -->
                        <line x1="80" y1="220" x2="720" y2="220" stroke="#6B7280" stroke-width="1.5" class="string-line"/><!-- 5弦（A） -->
                        <line x1="80" y1="260" x2="720" y2="260" stroke="#6B7280" stroke-width="1.5" class="string-line"/><!-- 6弦（低音E） -->
                        
                        <!-- ポジションマーク -->
                        <circle cx="320" cy="160" r="4" fill="#E5E7EB"/>
                        <circle cx="560" cy="160" r="4" fill="#E5E7EB"/>
                        
                        <!-- Cメジャーコードの押弦位置（正しい弦配置） -->
                        <!-- 1弦（高音E）: 開放 -->
                        
                        <!-- 2弦（B）: 1フレット -->
                        <circle cx="140" cy="100" r="14" fill="#3B82F6" stroke="#FFFFFF" stroke-width="3" 
                                class="chord-dot cursor-pointer" tabindex="0" role="button"
                                aria-label="2弦 1フレット 1番指"/>
                        <text x="140" y="105" text-anchor="middle" class="fill-white text-sm font-semibold pointer-events-none">1</text>
                        
                        <!-- 3弦（G）: 開放 -->
                        
                        <!-- 4弦（D）: 2フレット -->
                        <circle cx="260" cy="180" r="14" fill="#3B82F6" stroke="#FFFFFF" stroke-width="3" 
                                class="chord-dot cursor-pointer" tabindex="0" role="button"
                                aria-label="4弦 2フレット 2番指"/>
                        <text x="260" y="185" text-anchor="middle" class="fill-white text-sm font-semibold pointer-events-none">2</text>
                        
                        <!-- 5弦（A）: 3フレット -->
                        <circle cx="380" cy="220" r="14" fill="#3B82F6" stroke="#FFFFFF" stroke-width="3" 
                                class="chord-dot cursor-pointer" tabindex="0" role="button"
                                aria-label="5弦 3フレット 3番指"/>
                        <text x="380" y="225" text-anchor="middle" class="fill-white text-sm font-semibold pointer-events-none">3</text>
                        
                        <!-- 6弦（低音E）: ミュート -->
                        <text x="50" y="265" text-anchor="middle" class="fill-red-600 text-lg font-bold">×</text>
                        
                        <!-- 弦名目盛り（左側） -->
                        <text x="30" y="65" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">E</text><!-- 1弦 -->
                        <text x="30" y="105" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">B</text><!-- 2弦 -->
                        <text x="30" y="145" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">G</text><!-- 3弦 -->
                        <text x="30" y="185" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">D</text><!-- 4弦 -->
                        <text x="30" y="225" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">A</text><!-- 5弦 -->
                        <text x="30" y="265" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">E</text><!-- 6弦 -->
                        
                        <!-- 弦番号（左側、小さく） -->
                        <text x="15" y="65" text-anchor="middle" class="fill-gray-500 text-xs">1</text><!-- 1弦 -->
                        <text x="15" y="105" text-anchor="middle" class="fill-gray-500 text-xs">2</text><!-- 2弦 -->
                        <text x="15" y="145" text-anchor="middle" class="fill-gray-500 text-xs">3</text><!-- 3弦 -->
                        <text x="15" y="185" text-anchor="middle" class="fill-gray-500 text-xs">4</text><!-- 4弦 -->
                        <text x="15" y="225" text-anchor="middle" class="fill-gray-500 text-xs">5</text><!-- 5弦 -->
                        <text x="15" y="265" text-anchor="middle" class="fill-gray-500 text-xs">6</text><!-- 6弦 -->
                        
                        <!-- フレット番号（上部） -->
                        <text x="140" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">1</text>
                        <text x="260" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">2</text>
                        <text x="380" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">3</text>
                        <text x="500" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">4</text>
                        <text x="620" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">5</text>
                    </svg>
                </div>
                
                
                <!-- コード情報 -->
                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="text-sm font-semibold text-gray-900 mb-2">コード情報</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-gray-600">
                        <div><span class="font-medium">コード名:</span> C</div>
                        <div><span class="font-medium">難易度:</span> 初級</div>
                        <div><span class="font-medium">ルート音:</span> C</div>
                        <div><span class="font-medium">種類:</span> メジャー</div>
                    </div>
                    <div class="mt-3">
                        <div class="font-medium text-gray-900 text-sm mb-1">押弦位置:</div>
                        <div class="text-xs text-gray-600">
                            <span class="mr-3">1弦: 開放</span>
                            <span class="mr-3">2弦: 1F</span>
                            <span class="mr-3">3弦: 開放</span>
                            <span class="mr-3">4弦: 2F</span>
                            <span class="mr-3">5弦: 3F</span>
                            <span class="mr-3">6弦: ×</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- インタラクティブサンプル -->
        <section class="mb-12">
            <div class="card">
                <div class="mb-6">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">インタラクティブフレットボード</h2>
                    <p class="text-sm text-gray-600">クリックで音声再生をシミュレート（実際の音は出ません）</p>
                </div>
                
                <div class="mb-6">
                    <svg viewBox="0 0 800 300" class="w-full h-auto border border-gray-200 rounded-lg bg-white" role="img" aria-label="インタラクティブフレットボード">
                        <!-- 背景 -->
                        <rect x="0" y="0" width="800" height="300" fill="#FEFEFE"/>
                        
                        <!-- フレット線 -->
                        <line x1="80" y1="40" x2="80" y2="260" stroke="#111827" stroke-width="4" class="fret-line"/>
                        <line x1="200" y1="40" x2="200" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="320" y1="40" x2="320" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="440" y1="40" x2="440" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="560" y1="40" x2="560" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        <line x1="680" y1="40" x2="680" y2="260" stroke="#D1D5DB" stroke-width="2" class="fret-line"/>
                        
                        <!-- 弦（上から1弦、下が6弦） -->
                        <line x1="80" y1="60" x2="720" y2="60" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 1弦（高音E） -->
                        <line x1="80" y1="100" x2="720" y2="100" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 2弦（B） -->
                        <line x1="80" y1="140" x2="720" y2="140" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 3弦（G） -->
                        <line x1="80" y1="180" x2="720" y2="180" stroke="#6B7280" stroke-width="1" class="string-line"/><!-- 4弦（D） -->
                        <line x1="80" y1="220" x2="720" y2="220" stroke="#6B7280" stroke-width="1.5" class="string-line"/><!-- 5弦（A） -->
                        <line x1="80" y1="260" x2="720" y2="260" stroke="#6B7280" stroke-width="1.5" class="string-line"/><!-- 6弦（低音E） -->
                        
                        <!-- ポジションマーク -->
                        <circle cx="320" cy="160" r="4" fill="#E5E7EB"/>
                        <circle cx="560" cy="160" r="4" fill="#E5E7EB"/>
                        
                        <!-- 弦名目盛り（左側） -->
                        <text x="30" y="65" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">E</text><!-- 1弦 -->
                        <text x="30" y="105" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">B</text><!-- 2弦 -->
                        <text x="30" y="145" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">G</text><!-- 3弦 -->
                        <text x="30" y="185" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">D</text><!-- 4弦 -->
                        <text x="30" y="225" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">A</text><!-- 5弦 -->
                        <text x="30" y="265" text-anchor="middle" class="fill-gray-700 text-sm font-semibold">E</text><!-- 6弦 -->
                        
                        <!-- 弦番号（左側、小さく） -->
                        <text x="15" y="65" text-anchor="middle" class="fill-gray-500 text-xs">1</text><!-- 1弦 -->
                        <text x="15" y="105" text-anchor="middle" class="fill-gray-500 text-xs">2</text><!-- 2弦 -->
                        <text x="15" y="145" text-anchor="middle" class="fill-gray-500 text-xs">3</text><!-- 3弦 -->
                        <text x="15" y="185" text-anchor="middle" class="fill-gray-500 text-xs">4</text><!-- 4弦 -->
                        <text x="15" y="225" text-anchor="middle" class="fill-gray-500 text-xs">5</text><!-- 5弦 -->
                        <text x="15" y="265" text-anchor="middle" class="fill-gray-500 text-xs">6</text><!-- 6弦 -->
                        
                        <!-- フレット番号（上部） -->
                        <text x="140" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">1</text>
                        <text x="260" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">2</text>
                        <text x="380" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">3</text>
                        <text x="500" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">4</text>
                        <text x="620" y="30" text-anchor="middle" class="fill-gray-600 text-xs font-medium">5</text>
                        
                        <!-- クリック可能な押弦位置サンプル -->
                        <circle cx="140" cy="185" r="14" fill="#059669" stroke="#FFFFFF" stroke-width="3" 
                                class="chord-dot cursor-pointer" tabindex="0" role="button"
                                aria-label="クリックで再生: 4弦 1フレット" onclick="playNote(4, 1)"/>
                        
                        <circle cx="260" cy="145" r="14" fill="#DC2626" stroke="#FFFFFF" stroke-width="3" 
                                class="chord-dot cursor-pointer" tabindex="0" role="button"
                                aria-label="クリックで再生: 3弦 2フレット" onclick="playNote(3, 2)"/>
                        
                        <circle cx="380" cy="105" r="14" fill="#7C3AED" stroke="#FFFFFF" stroke-width="3" 
                                class="chord-dot cursor-pointer" tabindex="0" role="button"
                                aria-label="クリックで再生: 2弦 3フレット" onclick="playNote(2, 3)"/>
                    </svg>
                </div>
                
                <!-- 音声再生フィードバック -->
                <div class="bg-blue-50 rounded-lg p-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
                        <span class="text-sm font-medium text-blue-900">再生状況:</span>
                        <span id="playback-status" class="text-sm text-blue-700">音符をクリックしてください</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- アクセシビリティ機能説明 -->
        <section class="mb-12">
            <div class="card">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6">アクセシビリティ機能</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">キーボード操作</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-center space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                                <span><kbd class="px-2 py-1 bg-gray-100 rounded text-xs">Tab</kbd> フォーカス移動</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                                <span><kbd class="px-2 py-1 bg-gray-100 rounded text-xs">矢印キー</kbd> フレットボード移動</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
                                <span><kbd class="px-2 py-1 bg-gray-100 rounded text-xs">Enter</kbd> / <kbd class="px-2 py-1 bg-gray-100 rounded text-xs">Space</kbd> 音声再生</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">視覚的配慮</h3>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex items-center space-x-2">
                                <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                <span>WCAG 2.1 AAA準拠（コントラスト比 7:1以上）</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                <span>44px最小タッチターゲット確保</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                <span>高コントラストモード対応</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                    <div class="flex items-start space-x-3">
                        <div class="flex-shrink-0 w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-xs font-bold">!</span>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-amber-900 mb-1">アクセシビリティテスト推奨</h4>
                            <p class="text-sm text-amber-800">実装時は以下のツールでテストすることを推奨します：</p>
                            <ul class="mt-2 text-sm text-amber-700 space-y-1">
                                <li>• スクリーンリーダー（NVDA、JAWS）</li>
                                <li>• キーボードナビゲーション</li>
                                <li>• コントラスト比測定ツール</li>
                                <li>• モーション設定の検証</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- フッター -->
        <footer class="text-center text-sm text-gray-500 py-8">
            <p>Guitar Chord Quiz - Apple風デザインシステム + WCAG 2.1 AAA準拠</p>
            <p class="mt-2">🎸 Generated with Claude Code</p>
        </footer>
    </div>

    <!-- JavaScript for interactivity -->
    <script>
        function playNote(string, fret) {
            const status = document.getElementById('playback-status');
            status.textContent = `${string}弦 ${fret}フレット を再生中...`;
            
            // シミュレート: 実際の音声再生の代わりに視覚的フィードバック
            setTimeout(() => {
                status.textContent = `${string}弦 ${fret}フレット 再生完了`;
            }, 500);
            
            setTimeout(() => {
                status.textContent = '音符をクリックしてください';
            }, 2000);
            
            // アクセシビリティ: スクリーンリーダー用通知
            announceToScreenReader(`${string}弦 ${fret}フレット を再生しました`);
        }
        
        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.textContent = message;
            
            document.body.appendChild(announcement);
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }
        
        // キーボードナビゲーション
        document.addEventListener('keydown', function(e) {
            if (e.target.classList.contains('chord-dot')) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    e.target.click();
                }
            }
        });
        
        // フォーカス表示の強化（CSSで処理するためJavaScript処理を削除）
        // フォーカス時のスタイルはCSSの:focusセレクタで適用
    </script>
</body>
</html>